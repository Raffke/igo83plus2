<header>
    <layer ui_HelpTmcSettings         type="xhtml" template=help_text filename="i18n/hlp_settingtmc.xhtml">
    <layer ui_HelpTmcParams           type="xhtml" template=help_text filename="i18n/hlp_settingtmc_stations.xhtml">
    <layer ui_HelpNoTmcHardware       type="xhtml" template=help_text filename="i18n/hlp_settingdetecttmc.xhtml">

    ; its place would be tmc.ui correctly, but the engine doesn't support lazy var models yet (hasn't been merged from ..._GM branch), and tmc_*x*.ui references it
	  <var vTMCMapFromAnnounce=0 registermodel>
</header>

<element_template et_TmcEvent>
  <SPRITE xxx x=44 y=20  z=1 bmp="$smalltmc.spr" phasemodel="*.icon_phase" visiblemodel="*.single_icon">
  <SPRITE xxx x=44 y=12  z=1 bmp="$smalltmc.spr" phasemodel="*.icon_phase" visiblemodel="!*.single_icon">
  <SPRITE xxx x=44 y=32  z=1 bmp="$smalltmc.spr" phasemodel="*.icon_phase2" visiblemodel="!*.single_icon">

  <SPRITE xxx x=347 y=4 z=1 bmp="$tmc_event_new.spr" phase=1 visiblemodel="*.is_new">
  <SPRITE xxx x=347 y=4 z=1 bmp="$tmc_event_new.spr" phase=0 visiblemodel="!*.is_new">
 
  <SPRITE xxx x=347 y=24 z=1 bmp="$tmc_event_onroute.spr" phasemodel="*.on_route">  
  <SPRITE xxx x=347 y=24 z=1 bmp="$tmc_event_cant_avoided.bmp" visiblemodel="*.cant_avoided">
    
  <BUTTON et_TmcEvent_btn%ID% template=btn_4a SELECTABLE onRelease='run sc_TMCListEventOnRelease' clickmodel="tmc.events.list.setcurrent $i">
  
  <ROADSHIELDEDTEXT	et_TmcEvent_txt1%ID%  USE_BRACKETS=0 watchstate=et_TmcEvent_btn%ID% x=59 y=5  w=37  z=1 textmodel_wstr="*.roadnumber_enc" template=xtxt4 font="tahomabd" fontsize=15 visiblemodel="!*.long_roadnumber">
  
	<TEXT	et_TmcEvent_txt2%ID%  watchstate=et_TmcEvent_btn%ID% x=59 y=24  w=37  z=1 textmodel_wstr="*.distance.full_text" visiblemodel="*.distance.valid" template=xtxt4 fontsize=14>

	<TEXT	et_TmcEvent_txt3%ID%  watchstate=et_TmcEvent_btn%ID% x=101 y=2   w=220 z=1 textmodel_wstr="*.location" template=xtxt4 valign="TOP" font="tahomabd">
	<TEXT	et_TmcEvent_txt4%ID%  watchstate=et_TmcEvent_btn%ID% x=101 y=16  w=220 z=1 textmodel_wstr="*.location2" template=xtxt4 valign="TOP" visiblemodel="!*.single_location" fontsize=10>
	<TEXT	et_TmcEvent_txt5%ID%  watchstate=et_TmcEvent_btn%ID% x=101 y=28  w=220 z=1 textmodel_wstr="*.description" template=xtxt4 valign="TOP" >
</element_template>

<layer ui_TmcEventsList z=30>
	<LIST   lstTEL_Events template=tlist element_template="et_TmcEvent" listmodel="tmc.events.list">
	<TEXT xxx   template=pageindex textmodel_wstr="ui.lstTEL_Events.page_counter">

	<BUTTON xxx template=prevpage clickmodel="ui.lstTEL_Events.prevpage" enabledmodel="ui.lstTEL_Events.prevpage.valid" template="slow_repeat">
	<BUTTON xxx template=nextpage clickmodel="ui.lstTEL_Events.nextpage" enabledmodel="ui.lstTEL_Events.nextpage.valid" template="slow_repeat">

	<TEXT   xxx template=txt_empty text="<No Traffic Events>" visiblemodel="tmc.events.list.isempty">
	<SPRITE xxx template=spr_empty visiblemodel="tmc.events.list.isempty">

; Ez itt a map kepernyore valtana. Hely sincs neki, es nem is biztos, hogy kell ide [tmt]
	<BUTTON btn_TmcSettings		template=footer4_1a  z=12 text="Settings" onrelease='vClearNewMessages.set 0, NEXTSTATE st_TmcSettings'> 	
	<BUTTON xxx		            template=footer4_2a  z=12 text="Stations" enabledmodel="tmc.present" onrelease='vClearNewMessages.set 0, NEXTSTATE st_TmcParams'> 	
	
</layer>


<layer ui_TmcParams z=35>
	<CHECKBOX xxx template=chk_5a y=20  z=99  text="Use Auto tuner" boolmodel="tmc.auto_tuning" enabledmodel="tmc.auto_tuning_available" onrelease='exec "tmc.change_tuning_mode"'>

	<SPRITE xxx         x=82 y=56 bmp="tmc_statname_bg.bmp">
	<TEXT	StationName   x=85 y=60  w=190 template=texttmc text="Station Name" fontsize=16 textmodel_wstr="tmc.current_station_name">
	<SPRITE xxx         x=85 y=82 z=199 bmp="tmc_signal.spr" phasemodel="tmc.signal_strength">
	
	<BUTTON btn_TMC_inc x=24  y=56 bmp="btn_tmc_prev.bmp#3"  enabledmodel="!tmc.auto_tuning" clickmodel="tmc.tuner_step_down" onrelease='' onlongclick='exec "tmc.tuner_search_down"'>
	<BUTTON btn_TMC_dec x=319 y=56 bmp="btn_tmc_next.bmp#3"  enabledmodel="!tmc.auto_tuning" clickmodel="tmc.tuner_step_up" onrelease='' onlongclick='exec "tmc.tuner_search_up"'>

	<TEXT	xxx x=34 y=92   w=332 template=texttmc text="State Info"      textmodel_wstr="tmc.state">
	<TEXT	xxx x=34 y=110  w=332 template=texttmc text="Current Message" textmodel_wstr="tmc.current_station_message">
	<SPRITE xxx x=24 y=92 bmp="empty_textbox_tmc.bmp">	
	
	<BUTTON xxx template=btn_5a   y=130 text="Exclude this station"    clickmodel="tmc.deny_current_station" enabledmodel="tmc.station_tuned">
	<BUTTON xxx template=btn_5a   y=166 text="Show Excluded stations" onrelease='NEXTSTATE st_TmcTiltStations' enabledmodel="!tmc.denied_stations_list.isempty" >

	<BUTTON xxx  template=footer3_2a text="Subscription" onrelease='NEXTSTATE STF_TMC_SUBSCRIBE' visiblemodel="tmc.enable_subscription"> 
	<BUTTON xxx  template=footer3_3a text="Help"       onrelease='NEXTSTATE st_HelpTmcParams'>
</layer>

<layer ui_TmcSettings z=35>	
	<SLIDER sld_tmc_sortevents  template=sld_5a     y=21  z=10   var=vTmcSortMode   value="Distance|0|Type|1|Road name|2" onselect=''>	
	<TEXT   xxx  template=btntext                   y=30 w=120 text="Sort events by:" watchstate=sld_tmc_sortevents>
	<SLIDER sld_tmc_eventlist  template=sld_5a      y=57 z=10   var=vTmcShowOnRoute value="All Events|0|On Route|1">
	<TEXT   xxx  template=btntext                   y=66 w=120 text="Event list:" watchstate=sld_tmc_eventlist>
	
	<BUTTON xxx  template=footer2_2a text="Help"       onrelease='NEXTSTATE st_HelpTmcSettings'> 
</layer>

<element_template et_TmcDeniedStation>
	<BUTTON btnTMCDeniedStation%ID% template=btn_4b w=83 textmodel_wstr="*.provider" clickmodel="tmc.denied_stations_list.setcurrent $i">
	<TEXT xxx template=txt_4    w=83 x=127 align="CENTER" textmodel_wstr="*.station_name" watchstate=btnTMCDeniedStation%ID%>
	<TEXT xxx template=txt_4    w=83 x=220 align="RIGHT" textmodel_wstr="*.frequency" watchstate=btnTMCDeniedStation%ID%>
	<BUTTON xxx template=btn_4d iconspr="x.bmp" text="" clickmodel="tmc.denied_stations_list.setcurrent $i" onrelease='run sc_Enable_Selected_Station'>
</element_template>

<layer ui_TmcDeniedStations z=35>
	<LIST lstTES_DeniedStations template=tlist element_template="et_TmcDeniedStation" listmodel="tmc.denied_stations_list">
	<BUTTON xxx template=prevpage clickmodel="ui.lstTES_DeniedStations.prevpage" enabledmodel="ui.lstTES_DeniedStations.prevpage.valid" template="slow_repeat">
	<BUTTON xxx template=nextpage clickmodel="ui.lstTES_DeniedStations.nextpage" enabledmodel="ui.lstTES_DeniedStations.nextpage.valid" template="slow_repeat">

	<TEXT   xxx template=txt_empty text="<No Excluded Stations>" visiblemodel="tmc.denied_stations_list.isempty">
	<SPRITE xxx template=spr_empty visiblemodel="tmc.denied_stations_list.isempty">
	
	<BUTTON xxx  template=footer2_1a text="Clear All"  clickmodel="tmc.enable_all_stations" enabledmodel="!tmc.denied_stations_list.isempty" >
</layer>

<layer ui_NoTmcHardware z=35>
  <SPRITE xxx                                     x=21 y=21 z=0 bmp="poti_bg_1line.bmp" >
	<TEXT   xxx template=txt_sld template=only_white     y=21 color=#FFFFFF text="No TMC Hardware Found!" w=332 align="CENTER">

  <SLIDER  sldNTHprotocol template=sld_5a              y=57 value="AUTO|-1|AVANTEQ|10|Fx|9|Samsung|8|Ngai Lik|7|Open TMC v2|6|Open TMC v1|5|Amaryllo|4|Eten|3|Royaltek|2|GNS|1" var=vTmcReceiverType enabledmodel="!tmc.full_autodetection&&!tmc.autodetection_in_progress">
	<TEXT   xxx template=txt_sld                         y=57 text="Protocol" enabledmodel="!tmc.full_autodetection&&!tmc.autodetection_in_progress" watchstate=sldNTHprotocol>
   
  <SLIDER sldNTHPort template=sld_5a                   y=93 value="AUTO|-1|9|9|8|8|7|7|6|6|5|5|4|4|3|3|2|2|1|1" var=vTmcPort enabledmodel="!tmc.full_autodetection&&!tmc.autodetection_in_progress">
	<TEXT   xxx template=txt_sld                         y=93 text="Port" enabledmodel="!tmc.full_autodetection&&!tmc.autodetection_in_progress" watchstate=sldNTHPort>
	
  <SLIDER sldNTHBaudR template=sld_5a                  y=129 value="AUTO|-1|4800|4800|9600|9600|19200|19200|38400|38400|57600|57600" var=vTmcBaud enabledmodel="!tmc.full_autodetection&&!tmc.autodetection_in_progress">
  <TEXT   xxx template=txt_sld                         y=129 text="Baud rate:" enabledmodel="!tmc.full_autodetection&&!tmc.autodetection_in_progress" watchstate=sldNTHBaudR>
	  
  <BUTTON xxx template=footer3_2a text="Start autodetect" enabledmodel="!tmc.autodetection_in_progress" onrelease='EXEC "tmc.start_autodetect", STATE st_TMCAutoDetect'>
	<BUTTON xxx template=footer3_3a text="Help" onrelease='NEXTSTATE st_HelpNoTmcHardware'>
</layer>



<LAYER ui_TMCAutoDetect z=35>
	<SPRITE xxx            x=24  y=66 z=0    bmp="GPSdetect_bg.bmp" >

	<TEXT   xxx template=txt_sld y=66 w=332  align="CENTER" text="Detecting TMC reveiver..." font="tahomabd" >
	
  <TEXT   xxx template=txt_sld y=93                       text="Protocol">
	<TEXT   xxx template=txt_sld y=93 x=210  align="RIGHT"  text="" textmodel_wstr="tmc.autodetect_current_source">

	<TEXT   xxx template=txt_sld y=113                      text="Port">
	<TEXT   xxx template=txt_sld y=113 x=210 align="RIGHT"  text="" textmodel_wstr="tmc.autodetect_current_port">

  <BUTTON xxx template=footer3_3a text="Stop" enabledmodel="tmc.autodetection_in_progress" onrelease='exec "tmc.stop_autodetect",STATE st_NoTmcHardware'>    
    
</layer>

  

;==============================
; TMC announcement

<element_template et_TmcEvent_Announce>
	<SPRITE xxx x=17 y=0   z=1 bmp="$tmc.spr" phasemodel="*.icon_phase"  visiblemodel="*.single_icon&!ui.vOnFlyover">
	<SPRITE xxx x=6 y=0  z=1 bmp="$tmc.spr" phasemodel="*.icon_phase"  visiblemodel="!*.single_icon&!ui.vOnFlyover">
	<SPRITE xxx x=29 y=0  z=1 bmp="$tmc.spr" phasemodel="*.icon_phase2" visiblemodel="!*.single_icon&!ui.vOnFlyover">

	<TEXT	xxx x=-8  y=21 w=52  z=1 textmodel_wstr="*.roadnumber"                                         template=xtxt3 fontsize=12 fonttype=buttonlabel_menu  font="tahomabd" color=#FFFFFF  visiblemodel="!*.long_roadnumber&!ui.vOnFlyover" align="CENTER">
</element_template>


<layer ui_TmcAnnounce z=4500 hide>
	<SPRITE xxx x=0  y=72 w=65 z=1 bmp="cock_infobg2.bmp" visiblemodel="!ui.v3dzoomcontrol&!ui.vOnFlyover">
	<LIST lstTMC_EventsOnRoute template=glist_TMC x=8 y=93 z=10 row=1 element_template="et_TmcEvent_Announce" listmodel="tmc.events.announced_events" showselection=0>
	<BUTTON xxx x=0  y=72 w=65 z=15 bmp="cock_infobg2.bmp" onrelease='run sc_TmcAnnounceClicked' alpha=0 clickmodel="tmc.events.announced_events.setcurrent 0" visiblemodel="!ui.vOnFlyover">
</layer>

;==============================
<element_template et_TmcEvent_map>
	<SPRITE xxx x=44 y=15  z=1 bmp="$tmc.spr" phasemodel="*.icon_phase"  visiblemodel="*.single_icon">
	<SPRITE xxx x=31 y=15  z=1 bmp="$tmc.spr" phasemodel="*.icon_phase"  visiblemodel="!*.single_icon">
	<SPRITE xxx x=58 y=15  z=1 bmp="$tmc.spr" phasemodel="*.icon_phase2" visiblemodel="!*.single_icon">

	<ROADSHIELDEDTEXT	xxx USE_BRACKETS=0 x=34 y=31  w=50  z=20 template=xtxt4 fontsize=14 font="tahomabd" textmodel_wstr="*.roadnumber_enc" visiblemodel="!*.long_roadnumber">
	
  <TEXT	xxx x=34   y=45  w=50  z=1 textmodel_wstr="*.distance.full_text" visiblemodel="*.distance.valid"   template=xtxt4 font="tahomabd" fontsize=14>

	<TEXT	xxx x=90 y=5  w=235 z=1 textmodel_wstr="*.description"  template=xtxt4 valign="TOP">
    <TEXT	xxx x=90 y=19 w=235 z=1 textmodel_wstr="*.location"     template=xtxt4 valign="TOP" font="tahomabd">
	<TEXT	xxx x=90 y=34 w=235 z=1 textmodel_wstr="*.location2"    template=xtxt4 valign="TOP" visiblemodel="!*.single_location" fontsize=11>
</element_template>

<layer ui_TMCMap z=3000>
  <SPRITE xxx x=24 y=1 z=10  bmp="btn_lb_4a_tmcevent.bmp">
	<LIST list_tmc_1line template=tlist y=2 row=1 element_template="et_TmcEvent_map" listmodel="tmc.events.list"  SHOWSELECTION=1 KEEPSELECTIONONSCREEN=1>
	<TEXT xxx   x=320  y=5  w=45  z=99  align="RIGHT" fontsize=12  font="tahomabd" fixedwidthnumbers=1 fonttype=bw textmodel_wstr="ui.list_tmc_1line.page_counter">

  <BUTTON xxx          template=prevpage clickmodel="ui.list_tmc_1line.prevpage" enabledmodel="ui.list_tmc_1line.prevpage.valid" onrelease='run sc_TMC_go_to_current_loc' visiblemodel="!ui.vTMCMapFromAnnounce">
	<BUTTON xxx          template=nextpage clickmodel="ui.list_tmc_1line.nextpage" enabledmodel="ui.list_tmc_1line.nextpage.valid" onrelease='run sc_TMC_go_to_current_loc' visiblemodel="!ui.vTMCMapFromAnnounce">
	
	<BUTTON xxx          template=footer2_1a text="Avoid" onrelease='run sc_TmcAvoid' visiblemodel="tmc.events.list.current.filter_option!=1&!tmc.ignore_all_events&!ui.vTMCMapFromAnnounce">
	<BUTTON xxx          template=footer2_1a text="Unavoid" onrelease='run sc_TmcUnavoid' visiblemodel="tmc.events.list.current.filter_option=1&!tmc.ignore_all_events&!ui.vTMCMapFromAnnounce">
	
  <BUTTON xxx          template=footer2_1a text="Avoid" onrelease='run sc_TmcAvoidAnn' visiblemodel="!tmc.ignore_all_events&ui.vTMCMapFromAnnounce">
	<BUTTON xxx          template=footer2_2a text="Ignore" onrelease='run sc_TmcUnavoidAnn' visiblemodel="!tmc.ignore_all_events&ui.vTMCMapFromAnnounce">

	<BUTTON xxx  x=5 y=93   z=0 bmp="map_zoomin1.bmp#2"  onClick='START_STOP_ZOOM 0 1' onRelease='START_STOP_ZOOM 0 0' onMouseLeave='START_STOP_ZOOM 0 0'>  
	<BUTTON xxx  x=5 y=148  z=0 bmp="map_zoomout1.bmp#2" onClick='START_STOP_ZOOM 1 1' onRelease='START_STOP_ZOOM 1 0' onMouseLeave='START_STOP_ZOOM 1 0'> 

  <BUTTON xxx x=40 y=1 z=40  bmp="btn_lb_4a_tmcevent.bmp" onrelease='' alpha=0 DISABLE>
    
</layer>

<LAYER ui_TMCMapBack z=1001>
	;<SPRITE xxx x=80 y=205 z=1 bmp="main_bg3.bmp" alpha=16>
	<BUTTON xxx template=backa onrelease='PREVSTATE' onlongclick='run sc_GoTo_MainMenu'>
</layer>

; **** Clear Channel ****
<layer ui_tmc_enter_code z=30>
	<SPRITE xxx template=xinputfield>
	<INPUTTEXT input_tmccode template=xinput MAXLENGTH=20 fp=99 CAPITALIZE=3 dontshowfocus emptytitle="<Enter TMC subscription code>">
</layer>

    
<layer ui_tmc_subscribe_status z=30>
	<SPRITE xxx   bmp="xhtml_bg.bmp" x=0 w=400 align="CENTER" y=21 z=2>

	<TEXT   txt_tmc_expiration_text   template=xtxt3    x=0 y=40  w=400 align="CENTER" text="">
	<TEXT   xxx                       template=xtxt3    x=0  y=90 w=400 align="CENTER" text="To purchase 1 year TMC subscription go to\nhttp://...com\nand enter:">
	
	<TEXT   txt_tmc_subscriber_id     template=xtxt3    x=0 y=135 w=400 align="CENTER" text="" replacetags>
	
	<BUTTON btn_tmc_enter_code        template=btn_5a       y=160 align="CENTER"  text="Activate" onrelease='NEXTSTATE STF_TMC_ENTER_CODE'> 
</layer>
